import{k as t}from"./katex.756172bd.js";var m=t.exports;function $(r,n){var e,c,i=r.posMax,u=!0,l=!0;return e=n>0?r.src.charCodeAt(n-1):-1,c=n+1<=i?r.src.charCodeAt(n+1):-1,(e===32||e===9||c>=48&&c<=57)&&(l=!1),(c===32||c===9)&&(u=!1),{can_open:u,can_close:l}}function x(r,n){var e,c,i,u,l;if(r.src[r.pos]!=="$")return!1;if(u=$(r,r.pos),!u.can_open)return n||(r.pending+="$"),r.pos+=1,!0;for(e=r.pos+1,c=e;(c=r.src.indexOf("$",c))!==-1;){for(l=c-1;r.src[l]==="\\";)l-=1;if((c-l)%2==1)break;c+=1}return c===-1?(n||(r.pending+="$"),r.pos=e,!0):c-e===0?(n||(r.pending+="$$"),r.pos=e+1,!0):(u=$(r,c),u.can_close?(n||(i=r.push("math_inline","math",0),i.markup="$",i.content=r.src.slice(e,c)),r.pos=c+1,!0):(n||(r.pending+="$"),r.pos=e,!0))}function b(r,n,e,c){var i,u,l,a,f=!1,p,o=r.bMarks[n]+r.tShift[n],k=r.eMarks[n];if(o+2>k||r.src.slice(o,o+2)!=="$$")return!1;if(o+=2,i=r.src.slice(o,k),c)return!0;for(i.trim().slice(-2)==="$$"&&(i=i.trim().slice(0,-2),f=!0),l=n;!f&&(l++,!(l>=e||(o=r.bMarks[l]+r.tShift[l],k=r.eMarks[l],o<k&&r.tShift[l]<r.blkIndent)));)r.src.slice(o,k).trim().slice(-2)==="$$"&&(a=r.src.slice(0,k).lastIndexOf("$$"),u=r.src.slice(o,a),f=!0);return r.line=l+1,p=r.push("math_block","math",0),p.block=!0,p.content=(i&&i.trim()?i+`
`:"")+r.getLines(n+1,l,r.tShift[n],!0)+(u&&u.trim()?u:""),p.map=[n,r.line],p.markup="$$",!0}function h(r){return r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}var d=function(n,e){e=e||{},e.katex&&(m=e.katex),e.blockClass||(e.blockClass="");var c=function(a){e.displayMode=!1;try{return m.renderToString(a,e)}catch(f){return e.throwOnError&&console.log(f),`<span class='katex-error' title='${h(f.toString())}'>${h(a)}</span>`}},i=function(a,f){return c(a[f].content)},u=function(a){e.displayMode=!0;try{return`<p class="katex-block ${e.blockClass}">`+m.renderToString(a,e)+"</p>"}catch(f){return e.throwOnError&&console.log(f),`<p class='katex-block katex-error ${e.blockClass}' title='${h(f.toString())}'>${h(a)}</p>`}},l=function(a,f){return u(a[f].content)+`
`};n.inline.ruler.after("escape","math_inline",x),n.block.ruler.after("blockquote","math_block",b,{alt:["paragraph","reference","blockquote","list"]}),n.renderer.rules.math_inline=i,n.renderer.rules.math_block=l};export{d as m};
