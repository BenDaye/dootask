<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>DooTask</title>
  <meta name="google" value="notranslate">
  <meta name="description" content="DooTask是一款轻量级的开源在线项目任务管理工具，提供各类文档协作工具、在线思维导图、在线流程图、项目管理、任务分发、即时IM，文件管理等工具。助力团队高效推进项目，让工作更简单。">
  <meta name="keywords" content="中国 Dootask 开源在线项目 任务管理工具 任务管理 轻量级 海豚有海 团队协作">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <link rel="stylesheet" href="../../css/common.css">
  <link rel="stylesheet" type="text/css" href="../../css/rem.css">
  <link rel="stylesheet" href="../../css/download.css">
</head>
<body>
  <div id="layout">
    <!-- 页头区域 -->
    <header class="head dow">
      <div class="nav">
        <div class="nav-layout">
          <a href="../zh/index.html" class="logo">
            <img id="logo" src="../../img/light/logo.svg" alt="DooTask,Logo">
            <i class="dootask txt-7002027">DooTask</i>
          </a>
          <ul class="nav-ul">
            <li class="nav-ul-item">
              <a class="txt-4001620 txt nav-product" href="../zh/product.html">产品</a>
            </li>
            <li class="nav-ul-item">
              <a class="txt-4001620 txt nav-solutions" href="../zh/solutions.html">解决方案</a>
            </li>
            <li class="nav-ul-item">
              <i class="txt-4001620 txt nav-support" id="support-txt" onclick="showMenuPopHandle()">
                支持
                <img src="../../img/vector.svg" alt="支持" class="nav-vector" id="drop-down-svg">
              </i>
              <ol class="submenu-pop" id="submenu-pop">
                <li class="submenu-pop-item" onclick="changeMenu()">
                  <a class="txt-4001418 txt-sub" href="../zh/download.html">下载中心</a>
                </li>
                <li class="submenu-pop-item" onclick="changeMenu()">
                  <a class="txt-4001418 txt-sub" href="../zh/help.html">帮助中心</a>
                </li>
              </ol>
            </li>
            <li class="nav-ul-item">
              <a class="txt-4001620 txt nav-price" href="../zh/price.html">服务价格</a>
            </li>
            <li class="nav-ul-item">
              <a class="txt-4001620 txt nav-about" href="../zh/about.html">关于我们</a>
            </li>
          </ul>
          <div class="nav-r">
            <div class="lang" id="lang-img">
              <img src="../../img/lang-select.svg" alt="语言切换" onclick="shouLangPopHandle()">
              <ul class="lang-pop" id="lang-pop">
                <li class="lang-pop-item" onclick="changeLanguage('zh')">
                  <i class="lang-txt">简体中文</i>
                </li>
                <li class="lang-pop-item" onclick="changeLanguage('en')">
                  <i class="lang-txt">English</i>
                </li>
              </ul>
            </div>
            <i class="nav-r-icon theme_dark" onclick="setTheme('light')">
              <img src="../../img/light.svg" alt="明亮主题">
            </i>
            <i class="nav-r-icon theme_light" onclick="setTheme('dark')">
              <img src="../../img/drak.svg" alt="暗黑主题">
            </i>
            <a href="https://github.com/kuaifan/dootask" target="_blank">
              <i class="nav-r-icon">
                <img src="../../img/github.svg" alt="github">
              </i>
            </a>
            <i class="line-1"></i>
            <span class="get-started">
              <a href="https://www.dootask.com/manage/dashboard"  target="_blank">
                <button class="btn btn-primary" >开始使用</button>
              </a>
            </span>
          </div>
          <div class="menuBtn">
            <img id="menuBtn" src="../../img/menu.svg" alt="菜单">
          </div>
        </div>
      </div>
      <div class="topics">
        <div class="topics-con">
          <div class="topics-layout">
            <div class="topics-tit mb-32">
              <span class="txt-6005670 topics-h1">下载DooTask客户端</span>
            </div>
            <h4 class="txt-4001830 topics-h4 mb-64">同时支持iOS、Android、macOS、Windows版本</h4>
            <ul class="download-ul">
              <li class="download-ul-item dow-animate-box" style="--delay: 0s;" onmouseover='handleMouseover(0)' onmouseout='handleMouseout(0)'>
                <a class="normal" href="https://apps.apple.com/cn/app/dootask/id1624855111">
                  <img class="icon mb-8" src="../../img/dow_ios.svg" alt="ios">
                  <i class="txt-4001624 txt">ios</i>
                </a>
                <div class="hover">
                  <img class="qr-code mb-8" src="../../img/ios_code.png" alt="扫描下载,ios">
                  <i class="txt-4001624 txt">扫描下载</i>
                </div>
              </li>
              <li class="download-ul-item dow-animate-box" style="--delay: 0.1s;" onmouseover='handleMouseover(1)' onmouseout='handleMouseout(1)'>
                <a class="normal" href="https://www.dootask.com/desktop/publish/latest?platform=android">
                  <img class="icon mb-8" src="../../img/dow_android.svg" alt="Android">
                  <i class="txt-4001624 txt">Android</i>
                </a>
                <div class="hover">
                  <div class="mb-12" id="qrcode" style="width: 100px;height: 100px;"></div>
                  <i class="txt-4001624 txt">扫描下载</i>
                </div>
              </li>
              <li class="download-ul-item dow-animate-box" style="--delay: 0.2s;" onmouseover='handleMouseover(2)' onmouseout='handleMouseout(2)'>
                <div class="normal">
                  <img class="icon mb-8" src="../../img/dow_mac.svg" alt="macOS">
                  <i class="txt-4001624 txt">macOS</i>
                </div>
                <div class="hover radius">
                  <button class="btn btn-green mb-12" style="width: 70%;">
                    <a class="chips-txt txt-4001418" id="arm64Link" href="https://www.dootask.com/uploads/desktop/0.27.46/DooTask-v0.27.46-mac-arm64.dmg">Apple Chips</a>
                  </button>
                  <button class="btn btn-green" style="width: 70%;">
                    <a class="chips-txt txt-4001418" id="x64Link" href="https://www.dootask.com/uploads/desktop/0.27.46/DooTask-v0.27.46-mac-x64.dmg">Intel Chips</a>
                  </button>
                </div>
              </li>
              <li class="download-ul-item dow-animate-box" style="--delay: 0.3s;" onmouseover='handleMouseover(3)' onmouseout='handleMouseout(3)'>
                <p class="normal">
                  <img class="icon mb-8" src="../../img/dow_window.svg" alt="Windows">
                  <i class="txt-4001624 txt">Windows</i>
                </p>
                <a class="hover radius" id="winx64Link" href="https://www.dootask.com/uploads/desktop/0.27.46/DooTask-v0.27.46-win-x64.exe">
                  <img class="icon mb-8" src="../../img/dow_icon.svg" alt="Windows,下载">
                  <i class="txt-4001624 txt">下载</i>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </header>
    <!-- 菜单抽屉 -->
    <div class="drawer">
      <div class="drawer-t mb-36">
        <a href="../zh/index.html" class="logo">
          <img id="logo" src="../../img/light/logo.svg" alt="DooTaskLogo">
          <i class="dootask txt-7002027">DooTask</i>
        </a>
        <i class="close-drawer" onclick="closeDraweHandle()">✕</i>
      </div>
      <ul class="drawer-ul">
        <li class="drawer-item-t mb-16">
          <div class="drawer-item" onclick="closeDraweHandle()">
            <a class="txt-4001620 txt" href="../zh/product.html">产品</a>
          </div>
          <div class="drawer-item" onclick="closeDraweHandle()">
            <a class="txt-4001620 txt" href="../zh/solutions.html">解决方案</a>
          </div>
          <div class="drawer-item" onclick="expandMenuHandle('support')">
            <i class="txt-4001620 txt">
              支持
              <img src="../../img/vector.svg" class="nav-vector" alt="支持" id="drawer-down-support-svg">
            </i>
          </div>
          <ol class="drawer-active" id="support" style="display: none;">
            <li class="drawer-item" onclick="changeMenu()">
              <a class="txt-4001620 txt" href="../zh/download.html">下载中心</a>
            </li>
            <li class="drawer-item" onclick="changeMenu()">
              <a class="txt-4001620 txt" href="../zh/help.html">帮助中心</a>
            </li>
          </ol>
          <div class="drawer-item" onclick="closeDraweHandle()">
            <a class="txt-4001620 txt" href="../zh/price.html">服务价格</a>
          </div>
          <div class="drawer-item mb-16" onclick="closeDraweHandle()">
            <a class="txt-4001620 txt" href="../zh/about.html">关于我们</a>
          </div>
        </li>
        <li class="drawer-item-c">
          <div class="drawer-item" onclick="expandMenuHandle('theme')">
            <i class="txt-4001620 txt">
              主题
              <img src="../../img/vector.svg" alt="主题" class="nav-vector" id="drawer-down-theme-svg">
            </i>
          </div>
          <ol class="drawer-active" id="theme" style="display: none;">
            <li class="drawer-item"  onclick="setTheme('light')">
              <i class="txt-4001620 txt">Light</i>
            </li>
            <li class="drawer-item"  onclick="setTheme('dark')">
              <i class="txt-4001620 txt">Dark</i>
            </li>
          </ol>
          <div class="drawer-item" onclick="expandMenuHandle('language')">
            <i class="txt-4001620 txt">
              语言
              <img src="../../img/vector.svg" alt="语言" class="nav-vector" id="drawer-down-language-svg">
            </i>
          </div>
          <ol class="drawer-active" id="language" style="display: none;">
            <li class="drawer-item"  onclick="changeLanguage('zh')">
              <i class="txt-4001620 txt">简体中文</i>
            </li>
            <li class="drawer-item"  onclick="changeLanguage('en')">
              <i class="txt-4001620 txt">English</i>
            </li>
          </ol>
        </li>
        <li class="drawer-item-b">
          <li class="drawer-item">
            <a class="txt-4001620 txt" href="https://demo.dootask.com">登录</a>
          </li>
        </li>
      </ul>
    </div>
    <!-- 内容区域 -->
    <main>
      <!-- 主要区域划分 -->
      <section>
        <article class="update">
          <div class="update-con">
            <div class="update-layout">
              <div class="update-l">
                <h1 class="txt-4003645 update-h1 mb-36">更新日志</h1>
                <ul class="update-ul">
                  <div id="releases"></div>
                  <li>
                    <a href="../zh/log.html" class="more-item">
                      <h5 class="txt-4001624 more">更多日志</h5>
                      <img class="icon" src="../../img/dow_arrow.svg" alt="更多日志">
                    </a>
                  </li>
                </ul>
              </div>
              <div class="update-r">
                <img class="update-r-svg" id="dow_pic1" src="../../img/light/zh_dow_pic1.png" alt="DooTask,下载中心">
              </div>
            </div>
          </div>
        </article>
      </section>
    </main>
    <!-- 页脚区域 -->
    <footer>
      <div class="footer-con">
        <div class="footer-layut">
          <div class="footer-l">
            <a href="../zh/index.html" class="logo">
              <img id="logo" src="../../img/light/logo.svg" alt="DooTask,Logo">
              <i class="dootask txt-7002027">DooTask</i>
            </a>
            <i class="txt txt-4001624">帮助团队有效地推进项目，使工作更轻松。</i>
          </div>
          <div class="footer-r">
            <ul class="footer-r-ul">
              <li class="footer-r-item">
                <ol class="footer-r-ol">
                  <li class="footer-ol-item txt-5001624 mb-24">链接</li>
                  <li class="footer-ol-item mb-16">
                    <a class="txt-4001624 txt" href="../zh/product.html">产品</a>
                  </li>
                  <li class="footer-ol-item mb-16">
                    <a class="txt-4001624 txt" href="../zh/solutions.html">解决方案</a>
                  </li>
                  <li class="footer-ol-item mb-16">
                    <a class="txt-4001624 txt" href="../zh/price.html">服务价格</a>
                  </li>
                  <li class="footer-ol-item">
                    <a class="txt-4001624 txt" href="../zh/about.html">关于我们</a>
                  </li>
                </ol>
              </li>
              <li class="footer-r-item">
                <ol class="footer-r-ol">
                  <li class="footer-ol-item txt-5001624 mb-24">支持</li>
                  <li class="footer-ol-item mb-16">
                    <a class="txt-4001624 txt" href="../zh/download.html">下载中心</a>
                  </li>
                  <li class="footer-ol-item">
                    <a class="txt-4001624 txt" href="../zh/about.html">帮助中心</a>
                  </li>
                </ol>
              </li>
              <li class="footer-r-item">
                <ol class="footer-r-ol">
                  <li class="footer-ol-item txt-5001624 mb-24">社区</li>
                  <li class="footer-ol-item">
                    <li class="footer-ol-item mb-16">
                      <i class="txt-4001624 txt" onclick="openInNewTab('https://github.com/kuaifan/dootask')">Github</i>
                    </li>
                    <li class="footer-ol-item mb-16">
                      <i class="txt-4001624 txt" onclick="openInNewTab('https://gitee.com/aipaw/dootask')">Gitee</i>
                    </li>
                    <li class="footer-ol-item" id="qq_group">
                      <i class="txt-4001624 txt">QQ 群</i>
                      <div class="group_code">
                        <img class="code-svg" id="home_code" src="../../img/light/home_code.svg" alt="群号：546574618">
                        <i class="group_num">群号：546574618</i>
                        <i class="lower_triangle"></i>
                      </div>
                    </li>
                  </li>
                </ol>
              </li>
            </ul>
          </div>
        </div>
        <div class="txt-4001624 filings">
          Copyright © 2022-2023 Dootask. All rights reserved.
        </div>
      </div>
    </footer>
  </div>
</body>
<script src="https://cdn.bootcdn.net/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="../../js/common.js"></script>
<script>
  /* 下载应用的hover处理函数 */ 
const download = document.querySelector('.download-ul');
const downloadItems = download.querySelectorAll('.download-ul-item');
const handleMouseover = (val)=>{
  downloadItems[val].children[0].style.display = 'none'
  downloadItems[val].children[1].style.display = 'flex'
}
const handleMouseout = (val)=>{
  downloadItems[val].children[0].style.display = 'flex'
  downloadItems[val].children[1].style.display = 'none'
}
const localStorageHandle = (val)=>{
  localStorage.setItem('update_log_num',val)
  window.location.href = '../zh/log.html'
}
const getItem = (key)=> {
  var record = JSON.parse(localStorage.getItem(key));
  if (!record) return null;
  if (new Date().getTime() > record.expired) {
    localStorage.removeItem(key);
    return null;
  }
  return record.value;
}
/* 获取仓库的更新信息处理函数 */ 
const setHrefUrl = (data,name,dom)=>{
  const url = data[0].assets.find(file => file.name.includes(name));
  const link = document.getElementById(dom);
  link.href = url.browser_download_url;
}
const logsItem =  getItem('logs_dowmload_zh')
const updates = document.getElementById('releases');
if(!logsItem) {
  fetch('https://api.github.com/repos/kuaifan/dootask/releases')
  .then(response => response.json())
  .then(data => {
    setHrefUrl(data,'arm64.dmg','arm64Link')
    setHrefUrl(data,'x64.dmg','x64Link')
    setHrefUrl(data,'arm64.exe','winx64Link')
    const releases = data.slice(0, 5).map((item,index) => {
      const { tag_name, created_at } = item;
      const date = created_at.split('T')[0];
      return `
        <li class="update-item" onclick="localStorageHandle(${index+1})">
          <h5 class="txt-4001624 update-h5">DooTask ${tag_name} 更新</h5>
          <i class="txt-4001624 time">${date}</i>
        </li>
      `;
    }).join('');
    let record = {value: releases, expired: new Date().getTime() + 30 * 60 * 1000};
    localStorage.setItem('logs_dowmload_zh', JSON.stringify(record))
    updates.innerHTML = releases;
  })
  .catch(error => {
    console.error(error);
  })
}else{
  updates.innerHTML = logsItem;
}
/* 滑动到可视区域执行动画 */ 
const boxes = document.querySelectorAll('.dow-animate-box');
const animateBoxes = ()=> {
  boxes.forEach(box => {
    const boxTop = box.getBoundingClientRect().top;
    const boxBottom = box.getBoundingClientRect().bottom;
    if (boxTop < window.innerHeight && boxBottom > 0) {
      box.classList.add('animate');
    }
  });
}
window.addEventListener('scroll', animateBoxes);
animateBoxes();

/* 生成网页二维码二维码 */ 
if(window.location.host !== ''){
  const url = window.location.href;
  const matchResult = url.match(/^(.*?)(?=\/site)/);
  const result = matchResult[1];
  new QRCode(document.getElementById('qrcode'), `${result}/site/zh/distribute.html`); // 测试
}
</script>
</html>